$themes: (
  dark: (
    anchorColor: #ff6347,
    backgroundColor: #222,
    textColor: #ddd,
    topNavColor: #000,
    topNavColorA: #000,
  ),
  lime: (
    anchorColor: #20b2aa,
    backgroundColor: #32cd32,
    textColor: #ddd,
    topNavColor: #28a428,
  ),
  perl: (
    anchorColor: #f78738,
    backgroundColor: white,
    textColor: #408bbd,
    topNavColor: #ededed,
  ),
  royal: (
    anchorColor: #c9e6ff,
    backgroundColor: #4169e1,
    textColor: whitesmoke,
    topNavColor: #3454b4,
  ),
);

@mixin themify($themes) 
{
  @each $theme, $map in $themes 
  {
    .theme-#{$theme}
    {
      $theme-map: () !global;
      @each $key, $submap in $map 
      {
        $value: map-get(map-get($themes, $theme), '#{$key}');
        $theme-map: map-merge($theme-map, ($key: $value)) !global;
      }

      @content;
      $theme-map: null !global;
    }
  }
}

@function themed($key) 
{
  @return map-get($theme-map, $key);
}

@include themify($themes) 
{
  color: themed('textColor');  
  background-color: themed('backgroundColor');  
}

a
{
  @include themify($themes)
  {
    color: themed('anchorColor');  
  }
}

.topnav
{
  @include themify($themes)
  {
    background-color: themed('topNavColor');  
  }
}